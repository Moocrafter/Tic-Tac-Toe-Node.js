<!DOCTYPE html>
<html lang="en">
<head>
	<title>Moocraft's Tic-Tac-Toe</title>

	<meta charset="UTF-8">
	<!--<meta name="viewport" content="initial-scale=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name = "viewport" content = "user-scalable=no, width=device-width">-->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!--Libraries-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

	<script src="sketch.js"></script>

	<script src="/socket.io/socket.io.js"></script>
	<script>
		var socket = io();

		socket.on(`recvGameCode`, (gameCode, type) => {
			if (type == 1) gotGameCode(gameCode, type);
		});
	</script>

	<script type="text/javascript">
		//Set the Friend button size
		$(document).ready(function() {
			buttonResize();
		});

		//Define the buttonResize function
		function buttonResize() {
			$("#friendPlayer").css({ //Select the element with the friendPlayer id
				//Set the width of the Friend player button to the width of the Random Person button
				'width': (`${$("#randomPlayer").width()/* + /*(/*isiOS ? 40 : 0)*/}px`)
			});
		}

		//Set isiOS to the result of the a anonymous function
		var isiOS = function() {
			//Set iDevices to a array of apple devices
			var iDevices = ['iPad Simulator','iPhone Simulator','iPod Simulator','iPad','iPhone','iPod'];

			//If the browser supports the navigator.platform or its set then continue
			if (!!navigator.platform) {
				//Loop through all the devcies in the iDevices array
				while (iDevices.length) {
					//If the navigator.platfom is the platform that was just popped of the list then return true
					if (navigator.platform === iDevices.pop()) return true;
				}
			}

			//If we aren't on ios then return false
			return false;
		}()

		//Define the resize function
		function resize() {
			//Wait until the canavs appears
			if (document.getElementById("gameCanvas") == null) return false;

			var done = false;

			//If the platform is a ios devices then wait
			//if (isiOS) {
				//Wait 100 milliseconds to allow ios devices to rotate
				setTimeout(function() {
					console.log(`The canvas size: ${(windowWidth * windowHeight) / 1977.6625}. #1`)

			//Define the resizeCode function
			
			console.log(`The canvas size: ${(windowWidth * windowHeight) / 1977.6625}. #2`)
			if (window.height > window.width) {
				//PORTIART
				canvas.style.width = `${window.width - (window.width / 18)}px`;
				canvas.style.height = `${window.width - (window.width / 18)}px`;

				//Scale the player choose div in the X direction
				var playerChoose = document.getElementByClassName(`playerChoose`)
				playerChoose.style.transform = `scaleX(${(window.width * window.height) / 342866.6666666667})`
			}else {
				//LANDSCAPE
				/*
				canvas.style.width = `${window.height - (window.height / 2.25)}px`;
				canvas.style.height = `${window.height - (window.height / 2.25)}px`;
				*/

				canvas.style.width = `${(windowWidth * windowHeight) / 1977.6625}px`;
				canvas.style.height = `${(windowWidth * windowHeight) / 1977.6625}px`;
				console.log((windowWidth * windowHeight) / 1977.6625)
			}

			//Call the button resize function
			buttonResize();

			//End the function with true
			return true;
			}, 100);
		}

		//Resize all elements who needs resizing onload
		/*window.onload = () => {
			/*var myVar = /*setInterval(()=>{if (resize()/*) clearInterval(myVar);}, 100);
		}*/

		//On resize resize all elements who need resizing
		window.onresize = () => resize();
	</script>

	<style type="text/css">
		canvas {
			padding: none;
		    margin: auto;
		    display: block;
		}
		.noselect {
			-webkit-touch-callout: none; /* iOS Safari */
			  -webkit-user-select: none; /* Safari */
		       -khtml-user-select: none; /* Konqueror HTML */
		         -moz-user-select: none; /* Firefox */
		          -ms-user-select: none; /* Internet Explorer/Edge */
		              user-select: none; /* Non-prefixed version, currently
		                                  supported by Chrome and Opera */
		}
		.playerChoose {
			background: #0000ff;
			background: linear-gradient(#0000ff, #6b6bff);
			border-radius: 5px;
			padding: 8px 20px;
			color: #ffffff;
			display: block;
			font: normal bold 24px/1 "Calibri", sans-serif;
			text-align: center;
			text-shadow: 1px 1px #000000;
			width: auto;
		}
		#gameTypePick {
			display: flex;
			justify-content: space-evenly; /* Equal gap between elements */
			align-items: center; /* Vertical alignment */
			height: 100vh; /* You can use height: 100% of the parent container */ 
			flex-wrap:wrap
		}
  </style>
</head>
<body style="text-align: center; margin: 0px;">
	<div id="gameCanvas" style="display: none;"></div>
	<div id="gameTypePick" style="width: 100%" class="noselect">
		<div id="randomPlayer" class="playerChoose font-face" onclick="gameTypePick(0)">
			<h1>Random Person</h1>
		</div>
		<div id="friendPlayer" class="playerChoose" onclick="gameTypePick(1)">
			<script type="text/javascript">buttonResize()</script>
			<h1>Friend</h1>
		</div>
	</div>
</body>
</html>
